// @web-memory.ru 2014
$.fn.myGaller=function(h){function g(){$("."+a.classIMG).remove();$("#"+a.loadID).animate({opacity:"hide"},"slow",function(){$("#"+a.loadID).remove()})}function k(){var b=$("."+a.classIMG).data("current"),c=$("."+a.classIMG+" img").length;numN=1*b+1;numN>=c&&(numN=0);$("."+a.classIMG+' img[data-img="'+b+'"]').animate({opacity:"hide"},"slow",function(){$("."+a.classIMG).width($("."+a.classIMG+' img[data-img="'+numN+'"]').width());$("."+a.classIMG+' img[data-img="'+numN+'"]').animate({opacity:"show"},
"slow");d("."+a.classIMG)});$("."+a.classIMG).data("current",numN)}function l(){var b=$("."+a.classIMG).data("current"),c=$("."+a.classIMG+" img").length;numN=1*b-1;0>numN&&(numN=1*c-1);$("."+a.classIMG+' img[data-img="'+b+'"]').animate({opacity:"hide"},"slow",function(){$("."+a.classIMG).width($("."+a.classIMG+' img[data-img="'+numN+'"]').width());$("."+a.classIMG+' img[data-img="'+numN+'"]').animate({opacity:"show"},"slow");d("."+a.classIMG)});$("."+a.classIMG).data("current",numN)}function d(a){$(a).css({position:"absolute",
left:($(window).width()-$(a).outerWidth())/2+$(window).scrollLeft()+"px",top:($(window).height()-$(a).outerHeight())/2+$(window).scrollTop()+"px"})}var a=$.extend({classA:"imgGaller",classIMG:"galler-images",close:"1",list:"1",loadID:"load"},h),e="",f=0;$(this).find("img").each(function(){var b=$(this).attr("src");b&&(split=b.split("/"),split_f=split[split.length-1],file_name=split_f.split("."),url_new=b.replace(split_f,file_name[0]+"_f."+file_name[file_name.length-1]),1==a.list?(e+='<img src="'+
url_new+'" data-img="'+f+'">',$(this).wrap('<a class="'+a.classA+'" href="'+url_new+'" data-num="'+f+'"></a>'),f++):$(this).wrap('<a class="'+a.classA+'" href="'+url_new+'"></a>'))});$(this).find("a."+a.classA).click(function(){var b=$(this).attr("href"),c=$(this).data("num");$("body").append('<div id="'+a.loadID+'"></div>');1!=a.list?$("body").append('<div class="'+a.classIMG+'"><a class="closeGaller" href="#closed"></a><img src="'+b+'"></div>'):($("body").append('<div class="'+a.classIMG+'" data-current="0"><a class="closeGaller" href="#closed"></a><a class="backGaller" href="#backGaller"></a><a class="nextGaller" href="#nextGaller"></a>'+
e+"</div>"),$("."+a.classIMG+" img").css("display","none"),$("."+a.classIMG).find("img").each(function(){var b=$(this).data("img");c==b&&($(this).css("display","block"),$("."+a.classIMG).data("current",c))}));$("#"+a.loadID).animate({opacity:"show"},"slow",function(){$("."+a.classIMG).css("width",$("."+a.classIMG).width());d("."+a.classIMG);$("."+a.classIMG).animate({opacity:"show"},"slow",function(){$("."+a.classIMG+' a[href="#closed"]').click(function(){g();return!1})});1==a.close&&$("#"+a.loadID).click(function(){g()});
1==a.list&&($("."+a.classIMG+' a[href="#nextGaller"]').click(function(){k();return!1}),$("."+a.classIMG+' a[href="#backGaller"]').click(function(){l();return!1}));$(window).resize(function(){d("."+a.classIMG)})});return!1})};